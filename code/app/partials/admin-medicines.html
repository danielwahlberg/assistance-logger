<h1>Tillgängliga mediciner</h1>
<p><i>Medicinlistan går inte att ändra</i></p>
<form>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Medicin</th>
        <th>Aktuell?</th>
      </tr>
    </thead>
    <tr ng-repeat="medicine in medicines">
      <td>{{medicine.name}} ({{medicine.id}})</td>
      <td><input type="checkbox" name="med" ng-model="medicine.isActive" value="{{medicine.id}}" /></td>
    </tr>
  </table>

</form>


<h1>Aktuella medicindoser</h1>
<p>Nedan listas aktuella doser och klockslag för varje medicin och du har möjlighet att ändra dos/klockslag</p>
<h2>Regelbunden medicinering</h2>
<form novalidate="true" ng-model="medicineDoses">
 <table class="table table-striped">
  <thead>
    <tr>
      <th>Medicin</th>
      <th>Dos</th>
      <th>Klockslag</th>
    </tr>
  </thead>
  <tr ng-repeat="medicine in medicineDoses">
    <td>
      <select ng-if="medicine.isNew" ng-change="medicineForNewDoseSelected(this)" ng-model="medicine" ng-options="medicineType as medicineType.name for medicineType in medicines">
      </select>
      <span ng-if="!medicine.isNew">{{medicine.medicineName}}</span>
    </td>
    <td><input type="text" ng-change="regularDoseChangeMade();" ng-model="medicine.dose" /></td>
    <td><input type="text" ng-change="regularDoseChangeMade();" ng-model="medicine.time"/></td>
  </tr>
</table>
 <!-- // Add new row; must be updated to include medicine type dropdown -->
 <button class="btn btn-default" ng-click="addRowDoses()">Ny rad</button>

 <button class="btn" ng-class="{'btn-disabled': regularDoseChangesSaved, 'btn-primary':!regularDoseChangesSaved}" ng-click="saveRegularDose()" >
   <span class="glyphicon" ng-class="{'glyphicon-floppy-saved': regularDoseChangesSaved, 'glyphicon-floppy-disk':!regularDoseChangesSaved}" aria-hidden="true"></span>
   Spara dosförändringar
 </button>
 <div class="alert alert-success alert-dismissible" style="margin-top: 2em;" ng-class="{collapse:!regularDoseChangesSaved}" role="alert" id="saveCompletedInfo">
   De nya doserna har sparats
 </div>
</form>
<h2>Mediciner att ge vid behov</h2>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Medicin</th>
      <th>Dos</th>
      <th>Ev. klockslag</th>
    </tr>
  </thead>
  <tr ng-repeat="medicine in medicinesWhenNeeded">
    <td>{{medicine.medicineName}}</td>
    <td><input type="text" ng-change="whenNeededDoseChangeMade();" ng-model="medicine.dose"/></td>
    <td><input type="text" ng-change="whenNeededDoseChangeMade();" ng-model="medicine.time"/></td>
  </tr>
</table>
<button class="btn" ng-class="{'btn-disabled': whenNeededDoseChangesSaved, 'btn-primary':!whenNeededDoseChangesSaved}" ng-click="saveWhenNeededDose()" >
  <span class="glyphicon" ng-class="{'glyphicon-floppy-saved': whenNeededDoseChangesSaved, 'glyphicon-floppy-disk':!whenNeededDoseChangesSaved}" aria-hidden="true"></span>
  Spara dosförändringar
</button>
<div class="alert alert-success alert-dismissible" style="margin-top: 2em;" ng-class="{collapse:!whenNeededDoseChangesSaved}" role="alert" id="saveWhenNeededCompletedInfo">
  De nya vid behov-doserna har sparats
</div>
